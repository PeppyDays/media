# Ubiquitous languages

**Ubiquitous languages** define domain-specific terms used consistently throughout the codebase and communication. These terms bridge the gap between business requirements and implementation.

## Media types

The service handles three categories of media, each with distinct processing and delivery requirements.

### Image

A still image file (JPEG, PNG, WebP, AVIF). Served via signed URL with on-the-fly resizing.

### Short-form video

A video under 10 minutes. Transcoded to multiple quality tiers (480p, 720p, 1080p) as progressive MP4. Served via signed URL as a single file download.

### Long-form video

A video of 10 minutes or longer. Transcoded to CMAF segments with HLS manifests and an ABR ladder (360p–1080p). Served via signed cookie for adaptive streaming.

## Media lifecycle

Each piece of media moves through the following stages from upload to serving.

### Upload

The process of a client obtaining a presigned URL from the service and uploading a file directly to object storage. The presigned URL binds content-type and enforces size limits.

### Validation

Post-upload verification triggered by a storage event notification. Checks actual MIME type against declared content-type and scans for malicious content.

### Transcoding

Asynchronous conversion of uploaded video into one or more output formats. Performed by a worker consuming jobs from a message queue. Produces quality variants and thumbnails.

### Serving

Providing access to media via signed URLs or signed cookies. The access method depends on the media type — single-file media uses signed URLs, multi-segment streaming uses signed cookies.

## Transcoding concepts

These terms describe the encoding and packaging technologies used during transcoding.

### ABR ladder (adaptive bitrate)

A set of quality variants encoded at different resolutions and bitrates. Enables the player to switch quality levels based on network conditions.

| Resolution | Bitrate        | Use case        |
| ---------- | -------------- | --------------- |
| 360p       | 400–700 kbps   | Low bandwidth   |
| 480p       | 700–1,200 kbps | Mobile 3G       |
| 720p       | 1.5–3 Mbps     | Mobile / tablet |
| 1080p      | 3–6 Mbps       | Desktop / Wi-Fi |

### CMAF (Common Media Application Format)

A standardized container format using fragmented MP4 (fMP4) segments. Enables a single encoding to serve both HLS and DASH manifests.

### HLS (HTTP Live Streaming)

Apple's adaptive streaming protocol. Uses a master playlist (manifest) that references variant playlists for each quality level. Each variant playlist points to media segments.

### Transcode profile

A predefined set of encoding parameters (codec, resolution, bitrate, segment duration) applied to a transcoding job. Different media types use different profiles.

## Access control

These terms describe how the service authorizes access to media resources.

### Presigned URL

A time-limited URL generated by the service that grants temporary permission to upload a file to object storage. Binds content-type and content-length constraints.

### Signed URL

A CDN URL with an embedded cryptographic signature that grants access to a single resource. Used for images and short-form video.

### Signed cookie

A set of cookies that grant access to multiple resources under a path prefix. Used for long-form video where a single playback session requires access to a manifest and many segments.

### Origin access control

A CDN mechanism that restricts origin storage access exclusively to the CDN distribution. Ensures all media access goes through the CDN.

## Infrastructure

These terms describe the storage and compute resources that support the media pipeline.

### Input bucket

The storage location where clients upload original media files. Always private, never directly accessible.

### Output bucket

The storage location where transcoded media (quality variants, thumbnails, HLS segments) are stored after processing. Also private, accessed only via the CDN.

### Worker

A service instance that consumes transcoding jobs from a message queue, runs encoding, and writes output to storage. Scales based on queue depth.
